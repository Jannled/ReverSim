<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Documentation: Level Editor</title>
  <style>
    html {
      line-height: 1.4;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      background-color: #e6eceb;
      padding: .2em .4em;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      background-color: #e6eceb;
      padding: 1em;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style>
  a:hover {
  	color: #00445f;
  }

  code, pre {
  	border-radius: 5px;
  }
  </style>
</head>
<body>
<h1 id="documentation-level-editor">Documentation Level Editor</h1>
<blockquote>
<p>[!WARNING]<br />
Only open files in the level editor, that you fully trust! The editor is
not secured against malicious code inside the level files!</p>
</blockquote>
<p>The level editor will give you a graphical way to create and modify
the level files, which are presented by ReverSim.</p>
<p>The level editor provides all functionality required to design new
study tasks. However, if you need to make advanced edits or you would
like to write an external tool to generate levels, you can refer to our
detailed <a href="./Level.md">documentation about the level
format</a>.</p>
<h2 id="opening-the-level-editor">Opening the level editor</h2>
<p>You can find the level editor by going to <a
href="/pre_survey?group=editor">/pre_survey?group=editor</a>, if <a
href="#configuration">enabled</a>. In the Docker image the level editor
is enabled by default.<br />
If the group index page is enabled inside <a
href="./GameConfig.md#enablegroupindex">gameConfig.json</a>, you can
also navigate to <a href="/index">/index</a> and select the level editor
at the bottom of the page.</p>
<p>You should then be greeted by a page that looks like this:</p>
<p><img src="static/doc/res/LevelEditor.png"
alt="Screenshot of the level editor" /></p>
<h2 id="workflow">Workflow</h2>
<p>The general workflow is as follows, however the order here is not
mandatory and you will probably need to iterate over earlier steps
several times. For step 1 onwards we assume you have <a
href="#opening-the-level-editor">opened the level editor</a>.</p>
<ol start="0" type="1">
<li>If you have a certain logic function in mind, it might help to use
an external tool to generate a circuit, which you can then replicate
inside the editor. We can recommend Logic Friday, it is no longer
maintained but an <a
href="https://web.archive.org/web/20161222192144/http://sontrak.com/downloads.html">archived
version</a> can be used.</li>
<li>Open an already existing level from your local machine (if you want
to edit a level on the server you have to download it first) or start
from scratch by clicking the <em>Delete all</em> button in the bottom
right corner</li>
<li>Place your components, this step becomes a lot easier if you can
replicate the circuit generated by a different tool like Logic Friday.
All components can be found in the left toolbar, first click on the
desired component and then click the target locations on the grid:
<ul>
<li>Think of how many inputs your circuit should have and place the
required number of switches (the player will need to interact with
them)</li>
<li>Place the required number of power sources (the battery symbol).
Usually you will need one full battery (logical 1/high) per switch,
however you can also experiment with using both battery symbols as an
input for the logic gates.</li>
<li>Place your logic gates: <code>and</code> &amp; <code>or</code> gates
will need at least two inputs (the recommended number is to use no more
than two inputs, however the logic engine accepts more).
<code>Inverter</code>s take only one input.</li>
<li>Place the desired number of outputs. All light bulbs needs to be on
(1/high) for the player to pass the level and all danger signs needs to
be off (0, low).</li>
<li>You can modify properties like the rotation by entering select mode
again (the arrow in the left toolbar) and clicking on a component. In
this mode you can also move components around</li>
<li>To delete a component, click on it in select mode and press the
delete button</li>
<li>See the chapter <a href="#obfuscated-gates">Obfuscated Gates</a> if
you plan on using CovertGates in your level.</li>
</ul></li>
<li>Wire everything up:
<ul>
<li>Enter wiring mode by clicking the green wire tool from the left tool
bar. You can leave it by clicking the arrow symbol which is located
directly above.</li>
<li>In wiring mode, the autorouter is disabled and all connections are
displayed as straight lines. This will help you if the autorouter fails
due to an error.</li>
<li>Use splitters (the white dot in the left toolbar) if you need to
connect several inputs to the single output of a logic gate.</li>
<li>You can also use splitters to guide the autorouter, as all splitters
with only one output will be hidden while playing the level.</li>
<li>In Wiring Mode you can delete a wire by either clicking on it and
selecting delete in the pop up or by clicking the red circle with the
black <em>x</em>.</li>
</ul></li>
<li>Play the level at least once to make sure the level can be solved
and everything looks as desired. The play button is in the bottom right
corner.<br />
You can return to the editor by solving the level or by pressing the
<em>Skip</em> button.</li>
<li>Save the level to your local machine by clicking the <em>Save</em>
button. You then need to place it in the levels folder of your
server/Docker machine. (The level editor is running on your local
machine, the saved levels usually end up in your downloads folder. The
level will not be send to the server on its own!)</li>
</ol>
<blockquote>
<p>[!NOTE]<br />
Please make sure to save your level before navigating to a different
site or closing the tab/browser. While the editor tries to warn you when
leaving the site, it is not guaranteed that your browser will display
this warning to you. There is <strong>no</strong> automatic save feature
at the moment and all progress will be lost if you leave the page!</p>
</blockquote>
<h2 id="obfuscated-gates">Obfuscated Gates</h2>
<p>The intention of obfuscated gates is to complicate the process of
reverse engineering the circuit. In this game they are modeled by either
showing a different image to the player in case of covert gates, or they
show an ink blob for camouflaged gates.</p>
<p>Both options are represented as an orange dab of paint in the left
toolbar. You have to place them first and then switch back to select
mode to open up the properties panel.</p>
<p>You can not directly set the type to covert or camouflaged, but
instead you configure the <em>visualGate</em> and <em>actualGate</em>.
The visualGate determines the image that is shown to the player/person
reverse engineering the circuit and the <em>actualGate</em> is how the
game/silicon actually behaves. If you model reality, the only possible
combinations for covert and camouflaged gates are as follows:</p>
<table>
<thead>
<tr>
<th>Dropdown Menu</th>
<th>Covert Gate (values)</th>
<th>Camouflaged Gate (values)</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>visualGate</em></td>
<td><code>and</code>, <code>or</code></td>
<td><code>camouflaged</code></td>
</tr>
<tr>
<td><em>actualGate</em></td>
<td><code>inverter</code>, <code>identity</code></td>
<td><code>and</code>, <code>or</code></td>
</tr>
<tr>
<td><a href="#dummy-inputs">Dummy inputs?</a></td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>For technical details see the <a href="Level.md">level file
documentation</a>.</p>
<h3 id="dummy-inputs">Dummy Inputs</h3>
<p><code>identity</code> and <code>inverter</code> need an actual covert
gate connection. This <strong>one</strong> wire will determine the input
of the gate, all other connections are only visual and have no influence
on the input state. You can switch a wire from a normal connection to an
actual covert connection by selecting it in wire mode and clicking the
<em>Make covert connection</em> button. The wire will then switch from
green to orange, indicating the changed connection type.</p>
<h2 id="configuration">Configuration</h2>
<p>In order to use the level editor, the following two sections must
exist inside the <code>gameConfig.json</code>. The level editor is
enabled in the default config, to disable it simply remove the
<code>"editor": {...}</code> block from the config.</p>
<p>Inside the <code>"gamerules"</code> block the following should be
present:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;configEditor&quot;:</span> <span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;enableLogging&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;disclaimer&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;competitionShowSkipButton&quot;</span><span class="fu">:</span> <span class="st">&quot;always&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;wrongSolutionCooldown&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;phaseDifficulty&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Competition&quot;</span><span class="fu">:</span> <span class="st">&quot;EASY&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Create this block inside <code>"groups"</code> if you want to enable
the level editor, otherwise just remove it:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;editor&quot;:</span> <span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;ctr&quot;</span><span class="fu">:</span> <span class="dv">9000</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="st">&quot;configEditor&quot;</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;phases&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;LevelEditor&quot;</span><span class="ot">]</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>See <code>gameConfig_example.json</code> and the <a
href="GameConfig.md">gameConfig documentation</a> for additional
details.</p>
<h3 id="implementation-details">Implementation details</h3>
<p>The level editor is implemented as a regular group, which will show
two scenes. One of them is the <code>LevelEditor</code> scene which
needs to be configured in the gameConfig.json as shown above.<br />
When you press the play button, the client will create a
<code>Competition</code> scene with only one local level. After you
solve or skip this level, the server responds with the
<code>LevelEditor</code> scene again.</p>
</body>
</html>
